!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).monitorTextZoom=e()}(this,(function(){"use strict";var t,e,n,o,i,r={factor:void 0,percentage:void 0},a=function(){return Object.assign({},r)},c={init:function(r){e=r.remSize,n=r.attachZoomLevels,o=r.bootstrap,i=r.changed,h(),(t=document.createElement("IFRAME")).setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.setAttribute("title","Text zoom monitor iframe"),document.body.insertBefore(t,document.body.firstChild);var a=t.style;a.width="1rem",a.height="1px",a.borderWidth=0,a.position="absolute",a.overflow="hidden",a.whiteSpace="nowrap",a.margin="-1px";var c='style="width:100%;height:100%;padding:0;margin:0;overflow:hidden;"',d=t.contentWindow||t.contentDocument||t.document;(d=d.document||d).open(),d.write("<!DOCTYPE html><html "+c+"><body "+c+"></body></html>"),d.close(),f(),r.notifyLevelOnInit?t.contentWindow.addEventListener("resize",m):window.setTimeout((function(){return t.contentWindow.addEventListener("resize",m)}),0)},getZoom:a,requery:function(){h(),l()}},d=function(t,e){var n=t.split(":"),o=n[0].trim(),i=Number(n[1]);return"lt"===o&&e<i||"lte"===o&&e<=i||"gt"===o&&e>i||"gte"===o&&e>=i||"eq"===o&&e===i},s=function(t,e){for(var n,o=t.split("+"),i=0;i<o.length&&(n=d(o[i],e));i++);return n},u=function(t,e){for(var n=t.split("|"),o=0;o<n.length;o++)if(s(n[o],e))return!0},l=function(){var t=/\[.*?\]/;document.querySelectorAll("[data-query-tz]").forEach((function(e){for(var n=e.dataset.queryTz.split(" "),o=0;o<n.length;o++){var i=n[o].trim();if(i.length){var a="tz-query-match",c=t.exec(i);c&&(a=c[0],i=i.replace(a,""),a=a.substring(1,a.length-1)),u(i,r.percentage)?e.classList.add(a):e.classList.remove(a)}}}))},f=function(){r.factor=t.getBoundingClientRect().width/e,r.percentage=Math.round(100*(r.factor||1)),g(),l()},m=function(){f();var t=a();return i&&i(t),document.dispatchEvent(new CustomEvent("textzoom",{detail:t})),!1},h=function(){o&&document.querySelectorAll(":not(.stack-tz-if)[class*='stack-tz-']").forEach((function(t){var e=t.getAttribute("class").split(" ").filter((function(t){return 0===t.trim().indexOf("stack-tz-")}))[0].split("-"),n=e[e.length-1];t.classList.add("stack-tz-if"),t.setAttribute("data-query-tz","gte:".concat(n,"[bs").concat(Math.min(5,o),"-tz-query-match]"))}))},g=function(){if(n&&n.length)for(var t=0;t<n.length;t++){var e="tz-"+n[t];r.percentage>=n[t]?document.body.classList.add(e):document.body.classList.remove(e)}};return c}));
